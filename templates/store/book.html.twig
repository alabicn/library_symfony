{% extends 'base.html.twig' %}

{% block title %}
{{title}}
{% endblock %}

{% block body %}

{% if title is defined %}
        <h1 class="page__title">{{title}}</h1>
    {% else %}
        <h1>Header</h1>
    {% endif %}
<style>
    .example-wrapper {
        margin: 1em auto;
        max-width: 800px;
        width: 95%;
        font: 18px/1.5 sans-serif;
    }

    .example-wrapper code {
        background: #F5F5F5;
        padding: 2px 6px;
    }
</style>


<div>
    <h1>{{ book.author.name ~ " " ~ book.author.surname|upper}}</h1>
    <h3>{{ book.title }}</h3>
    <img src="/assets/img/{{ book.srcImage }}" alt="{{ book.altImage }}" title="{{ book.titleImage }}" />

    <h1>{% for e in book.editions %}
        {{ e.name }} : {{ book.prices[e.id]|number_format(2, '.', ' ') }} â‚¬<br />
        
        {% if e.name == 'eBook' %}
        <a href={{ path("shopping_cart", {'id': book.id})}}>
            Add to cart?
        </a>
        {% endif %}

        {% endfor %}
    </h1>

 
 


        {% if app.user and book.ratedByUser(app.user.id) == false %}
        <form method="post">
            <div class="stars stars-example-bootstrap">
                <select id="example" name="rating">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="form-group">
                <label for="inputEmail" class="required">Comment</label>
                <input type="text" name="comment" id="inputComment" required="required" class="form-control" required autofocus>
                <div class="form-group">
                    <button type="submit" id="ok" name="ok" class="btn-primary btn-block btn">Submit</button>
                </div>
            </div>
        </form>
    


        {% endif %}

    







        <h2>{{ book.evaluations | length }} messages</h2>


        <p>

            Average rating :
            {% if book.average %}
            {{ book.average }}/5
            {% else %}
            No ratings yet.
            {% endif %}
        </p>


        {% for evaluation in book.evaluations %}

        <ul>
            <li><strong>{{ evaluation.comment}}<br></strong>
                <span><a href={{ path("show_user", {'id': evaluation.user.id}) }}>{{ evaluation.user.uname }}</a>
                    answered : {{ evaluation.dateEvaluation|date("F jS\\, Y \\a\\t G:i\\h", "Europe/Paris") }}</span>
                <span>{{ evaluation.user.uname }} rated : {{ evaluation.rating }}/5</span>
                </li>
                {% if is_granted('ROLE_ADMIN') %}
                <li><a href={{path("remove_evaluation", {'id': evaluation.id})}} onclick="return confirm('Are you sure?')">DELETE?</a></li>
                {% endif %}




        </ul>
        {% endfor %}

    </div>





</div>

{% endblock %}